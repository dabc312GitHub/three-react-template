(this["webpackJsonpthree-react-sandbox"]=this["webpackJsonpthree-react-sandbox"]||[]).push([[6,8],{39:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),c=(n(45),function(e){var t=e.sample;return console.log("Sample: %s %s",t.name,t.caseNb?"#"+t.caseNb:""),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overlay",id:"info"},r.a.createElement("span",null,t.name)))}),o=function(e){var t=e.items,n=e.current,a=e.onSelect;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overlay inputBtn",id:"caseSelector"},r.a.createElement("select",{id:"testCases",value:n,onChange:function(e){return a(e.target.value)}},Object.keys(t).map((function(e){return r.a.createElement("option",{key:e,value:e},t[e])})))))}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(16),r=n(15),c=n(49),o=Object(c.a)((function(e,t){return{time:{custom:new Date},controls:{},setTime:function(n){e(Object(a.a)({},t(),{time:{custom:n}}))},setControls:function(n){return e(Object(a.a)({},t(),{controls:n}))}}})),l=Object(r.a)(o,1)[0]},42:function(e,t,n){"use strict";n.r(t),n.d(t,"Wrapper",(function(){return S})),n.d(t,"Controls",(function(){return y})),n.d(t,"MoveCtrl",(function(){return x})),n.d(t,"Lights",(function(){return C})),n.d(t,"Helpers",(function(){return M}));var a,r=n(15),c=n(0),o=n.n(c),l=n(38),u=n(41),i=n(43),s=n.n(i),m=n(44),f=n.n(m),p=new l.TextureLoader,d=function(e,t){return p.load(e,(function(e){return e.wrapS=l.RepeatWrapping,e.wrapT=l.RepeatWrapping,e.anisotropy=4,e.repeat.set(t,t),e}))},g=function(e){return d(f.a,e)},b={uniforms:{},vertexShader:["attribute vec3 color;","varying vec3 col;","void main()","{","   col = color;","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["in vec3 col;","void main( void ) {","\tgl_FragColor = vec4(col.r,col.g,col.b,1.0);","}"].join("\n")};function E(e){switch(e.name){case a.WATER:return o.a.createElement("meshStandardMaterial",{attach:"material",opacity:.5,transparent:!0,color:16711680});case a.SAND:return o.a.createElement("meshStandardMaterial",{attach:"material",opacity:.5,transparent:!1,color:16777215,side:l.DoubleSide,metalness:.2,bumpScale:5e-4,map:(t=e.repeat,d(s.a,t)),normalMap:g(e.repeat)});case a.SHADCOL:return o.a.createElement("shaderMaterial",{attach:"material",vertexShader:b.vertexShader,fragmentShader:b.fragmentShader})}var t}!function(e){e[e.WATER=0]="WATER",e[e.SAND=1]="SAND",e[e.SHADCOL=2]="SHADCOL"}(a||(a={}));var v=n(40),h=n(46),j=n(47),O=n(39);Object(u.b)({OrbitControls:h.a}),Object(u.b)({TransformControls:j.a});var S=function(e){var t=Object(u.e)().gl;return t.setClearColor(0),t.shadowMap.enabled=!0,t.shadowMap.type=l.PCFSoftShadowMap,o.a.createElement(o.a.Fragment,null)},y=function(){var e=Object(c.useRef)(),t=Object(u.e)(),n=t.camera,a=t.gl,r=Object(v.a)((function(e){return e.setControls}));return Object(u.c)((function(){e.current.update()})),Object(c.useEffect)((function(){r(e.current)}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("orbitControls",{ref:e,args:[n,a.domElement],enableDamping:!0,dampingFactor:.1,rotateSpeed:.5}))},x=function(e){var t=e.onChange,n=e.object,a=Object(v.a)((function(e){return e.controls})),r=Object(c.useRef)(),l=Object(u.e)(),i=l.camera,s=l.gl,m=function(e){t&&t(e.target.object.matrix)};return Object(c.useEffect)((function(){r.current.addEventListener("dragging-changed",(function(e){return a.enabled=!e.value})),console.log("attach controled object"),r.current.attach(n),r.current.addEventListener("dragging-changed",m)}),[]),Object(c.useEffect)((function(){return function(){console.log("detach controled object"),r.current.detach(),r.current.removeEventListener("dragging-changed",m)}}),[]),o.a.createElement("transformControls",{ref:r,args:[i,s.domElement]})},C=function(e){var t=Object(c.useRef)();return Object(u.c)((function(e){var n=e.clock.getElapsedTime();t.current.position.x=50*Math.sin(n/2),t.current.position.z=50*Math.cos(n/2)})),o.a.createElement(o.a.Fragment,null,o.a.createElement("spotLight",{ref:t,intensity:1,position:[30,30,50],angle:.2,penumbra:1,castShadow:!0}))},M=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("gridHelper",{args:[e.size,10]}),o.a.createElement("axesHelper",{args:[e.size/2]}))},w=function(){var e=[],t=o.a.createElement("mesh",{"rotation-x":Math.PI/2,receiveShadow:!0},o.a.createElement("planeGeometry",{attach:"geometry",args:[50,50]}),o.a.createElement(E,{name:a.SAND,repeat:1}));return e.push(t),o.a.createElement(o.a.Fragment,null,o.a.createElement("group",null,e),";")},F=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],l=t[1],u=Object(c.useRef)(),i=Object(c.useRef)(),s=Object(c.useCallback)((function(e){e.stopPropagation(),l(!u.current)}),[]);Object(c.useEffect)((function(){u.current=n}));var m=Object(c.useMemo)((function(){return o.a.createElement("mesh",{ref:i,position:[0,0,0],castShadow:!0,onClick:function(e){return s(e)}},o.a.createElement("boxBufferGeometry",{attach:"geometry",args:[10,10,10]}),o.a.createElement(E,{name:a.SAND,repeat:1}))}),[]),f=n?o.a.createElement(x,{onChange:null,object:i.current}):"";return o.a.createElement(o.a.Fragment,null,m,f)};t.default=function(e){var t=e.sample;return o.a.createElement(o.a.Fragment,null,o.a.createElement(O.b,{sample:t}),o.a.createElement(u.a,{gl2:!0,camera:{position:[15,30,50]}},o.a.createElement(S,null),o.a.createElement(C,null),o.a.createElement(M,{size:128}),o.a.createElement(y,null),o.a.createElement(w,null),o.a.createElement(F,null)))}},43:function(e,t,n){e.exports=n.p+"static/media/sand.be1ebb92.jpg"},44:function(e,t,n){e.exports=n.p+"static/media/sand_norm.3d153e6a.png"},45:function(e,t,n){},57:function(e,t,n){e.exports=n.p+"static/media/Astronaut.f3152ab1.glf"},58:function(e,t,n){e.exports=n.p+"static/media/Horse.ebf4afeb.glb"},73:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"astronaut",(function(){return d.a})),n.d(a,"horse",(function(){return b.a})),n.d(a,"avocado",(function(){return E})),n.d(a,"lantern",(function(){return v})),n.d(a,"sponza",(function(){return h}));var r=n(48),c=n(15),o=n(0),l=n.n(o),u=n(41),i=n(39),s=n(42),m=n(70),f=n(40),p=n(57),d=n.n(p),g=n(58),b=n.n(g),E="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Avocado/glTF/Avocado.gltf",v="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Lantern/glTF/Lantern.gltf",h="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Sponza/glTF/Sponza.gltf",j=n(55),O=n(38),S=function(e){var t=e.url,n=Object(u.d)(m.a,t),a=Object(f.a)((function(e){return e.controls})),r=Object(u.e)().camera,c=Object(u.e)().scene;return Object(o.useEffect)((function(){!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.2,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=new O.Box3,o=Object(j.a)(e);try{for(o.s();!(t=o.n()).done;){var l=t.value;c.expandByObject(l)}}catch(g){o.e(g)}finally{o.f()}var u=c.getSize(new O.Vector3),i=c.getCenter(new O.Vector3),s=Math.max(u.x,u.y,u.z),m=s/(2*Math.atan(Math.PI*r.fov/360)),f=m/r.aspect,p=n*Math.max(m,f),d=a.target.clone().sub(r.position).normalize().multiplyScalar(p);a.maxDistance=10*p,a.target.copy(i),r.near=p/100,r.far=100*p,r.updateProjectionMatrix(),r.position.copy(a.target).sub(d),a.update()}([n.scene],1.2,a,r),console.log(c.children[3].children[0])})),l.a.createElement("primitive",{object:n.scene,dispose:null})},y=function(e){var t=e.onSubmitUrl,n=Object(o.useState)(""),a=Object(c.a)(n,2),r=a[0],u=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(r)},className:"overlay centered"},l.a.createElement("label",null,l.a.createElement("input",{type:"url",id:"assetURL",value:r||"",onChange:function(e){u(e.target.value)}}),"\xa0\xa0"),l.a.createElement("input",{type:"submit",value:"custom url",className:"inputBtn"})))},x=a,C=["...custom"].concat(Object(r.a)(Object.keys(x)));t.default=function(e){var t=e.sample,n=Object(o.useState)(""),a=Object(c.a)(n,2),r=a[0],m=a[1],f=Object(o.useState)(1),p=Object(c.a)(f,2),d=p[0],g=p[1];return Object(o.useEffect)((function(){var e=C[d],n=d>0?x[e]:t.arg?t.arg:r;m(n)}),[d]),Object(o.useEffect)((function(){void 0!==t.case&&null!==t.case&&""!==t.case?g(t.case):t.arg&&g(0)}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(i.b,{sample:t}),0!==d||t.arg?"":l.a.createElement(y,{onSubmitUrl:function(e){console.log("asset url set to: "+e),m(e)}}),t.arg?"":l.a.createElement(i.a,{items:C,current:d,onSelect:function(e){console.log("switch case to: "+e),g(parseInt(e))}}),l.a.createElement(u.a,{camera:{position:[100,50,100]}},l.a.createElement("ambientLight",{intensity:2}),l.a.createElement(s.Helpers,{size:128}),l.a.createElement(s.Wrapper,null),l.a.createElement(s.Controls,null),r?l.a.createElement(o.Suspense,{fallback:null},l.a.createElement(S,{url:r})):""))}}}]);
//# sourceMappingURL=6.3ab04b55.chunk.js.map