(this["webpackJsonpthree-react-sandbox"]=this["webpackJsonpthree-react-sandbox"]||[]).push([[7,8],{39:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n),c=(a(45),function(e){var t=e.sample;return console.log("Sample: %s %s",t.name,t.caseNb?"#"+t.caseNb:""),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overlay",id:"info"},r.a.createElement("span",null,t.name)))}),o=function(e){var t=e.items,a=e.current,n=e.onSelect;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overlay inputBtn",id:"caseSelector"},r.a.createElement("select",{id:"testCases",value:a,onChange:function(e){return n(e.target.value)}},Object.keys(t).map((function(e){return r.a.createElement("option",{key:e,value:e},t[e])})))))}},40:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(16),r=a(15),c=a(49),o=Object(c.a)((function(e,t){return{time:{custom:new Date},controls:{},setTime:function(a){e(Object(n.a)({},t(),{time:{custom:a}}))},setControls:function(a){return e(Object(n.a)({},t(),{controls:a}))}}})),l=Object(r.a)(o,1)[0]},42:function(e,t,a){"use strict";a.r(t),a.d(t,"Wrapper",(function(){return S})),a.d(t,"Controls",(function(){return C})),a.d(t,"MoveCtrl",(function(){return y})),a.d(t,"Lights",(function(){return x})),a.d(t,"Helpers",(function(){return M}));var n,r=a(15),c=a(0),o=a.n(c),l=a(38),i=a(41),u=a(43),s=a.n(u),m=a(44),f=a.n(m),p=new l.TextureLoader,b=function(e,t){return p.load(e,(function(e){return e.wrapS=l.RepeatWrapping,e.wrapT=l.RepeatWrapping,e.anisotropy=4,e.repeat.set(t,t),e}))},d=function(e){return b(f.a,e)},g={uniforms:{},vertexShader:["attribute vec3 color;","varying vec3 col;","void main()","{","   col = color;","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["in vec3 col;","void main( void ) {","\tgl_FragColor = vec4(col.r,col.g,col.b,1.0);","}"].join("\n")};function E(e){switch(e.name){case n.WATER:return o.a.createElement("meshStandardMaterial",{attach:"material",opacity:.5,transparent:!0,color:16711680});case n.SAND:return o.a.createElement("meshStandardMaterial",{attach:"material",opacity:.5,transparent:!1,color:16777215,side:l.DoubleSide,metalness:.2,bumpScale:5e-4,map:(t=e.repeat,b(s.a,t)),normalMap:d(e.repeat)});case n.SHADCOL:return o.a.createElement("shaderMaterial",{attach:"material",vertexShader:g.vertexShader,fragmentShader:g.fragmentShader})}var t}!function(e){e[e.WATER=0]="WATER",e[e.SAND=1]="SAND",e[e.SHADCOL=2]="SHADCOL"}(n||(n={}));var h=a(40),v=a(46),O=a(47),j=a(39);Object(i.b)({OrbitControls:v.a}),Object(i.b)({TransformControls:O.a});var S=function(e){var t=Object(i.e)().gl;return t.setClearColor(0),t.shadowMap.enabled=!0,t.shadowMap.type=l.PCFSoftShadowMap,o.a.createElement(o.a.Fragment,null)},C=function(){var e=Object(c.useRef)(),t=Object(i.e)(),a=t.camera,n=t.gl,r=Object(h.a)((function(e){return e.setControls}));return Object(i.c)((function(){e.current.update()})),Object(c.useEffect)((function(){r(e.current)}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("orbitControls",{ref:e,args:[a,n.domElement],enableDamping:!0,dampingFactor:.1,rotateSpeed:.5}))},y=function(e){var t=e.onChange,a=e.object,n=Object(h.a)((function(e){return e.controls})),r=Object(c.useRef)(),l=Object(i.e)(),u=l.camera,s=l.gl,m=function(e){t&&t(e.target.object.matrix)};return Object(c.useEffect)((function(){r.current.addEventListener("dragging-changed",(function(e){return n.enabled=!e.value})),console.log("attach controled object"),r.current.attach(a),r.current.addEventListener("dragging-changed",m)}),[]),Object(c.useEffect)((function(){return function(){console.log("detach controled object"),r.current.detach(),r.current.removeEventListener("dragging-changed",m)}}),[]),o.a.createElement("transformControls",{ref:r,args:[u,s.domElement]})},x=function(e){var t=Object(c.useRef)();return Object(i.c)((function(e){var a=e.clock.getElapsedTime();t.current.position.x=50*Math.sin(a/2),t.current.position.z=50*Math.cos(a/2)})),o.a.createElement(o.a.Fragment,null,o.a.createElement("spotLight",{ref:t,intensity:1,position:[30,30,50],angle:.2,penumbra:1,castShadow:!0}))},M=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("gridHelper",{args:[e.size,10]}),o.a.createElement("axesHelper",{args:[e.size/2]}))},P=function(){var e=[],t=o.a.createElement("mesh",{"rotation-x":Math.PI/2,receiveShadow:!0},o.a.createElement("planeGeometry",{attach:"geometry",args:[50,50]}),o.a.createElement(E,{name:n.SAND,repeat:1}));return e.push(t),o.a.createElement(o.a.Fragment,null,o.a.createElement("group",null,e),";")},w=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),a=t[0],l=t[1],i=Object(c.useRef)(),u=Object(c.useRef)(),s=Object(c.useCallback)((function(e){e.stopPropagation(),l(!i.current)}),[]);Object(c.useEffect)((function(){i.current=a}));var m=Object(c.useMemo)((function(){return o.a.createElement("mesh",{ref:u,position:[0,0,0],castShadow:!0,onClick:function(e){return s(e)}},o.a.createElement("boxBufferGeometry",{attach:"geometry",args:[10,10,10]}),o.a.createElement(E,{name:n.SAND,repeat:1}))}),[]),f=a?o.a.createElement(y,{onChange:null,object:u.current}):"";return o.a.createElement(o.a.Fragment,null,m,f)};t.default=function(e){var t=e.sample;return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.b,{sample:t}),o.a.createElement(i.a,{gl2:!0,camera:{position:[15,30,50]}},o.a.createElement(S,null),o.a.createElement(x,null),o.a.createElement(M,{size:128}),o.a.createElement(C,null),o.a.createElement(P,null),o.a.createElement(w,null)))}},43:function(e,t,a){e.exports=a.p+"static/media/sand.be1ebb92.jpg"},44:function(e,t,a){e.exports=a.p+"static/media/sand_norm.3d153e6a.png"},45:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n,r=a(15),c=a(0),o=a.n(c),l=a(41),i=a(38);!function(e){e[e.POINT=0]="POINT",e[e.POLYGON=1]="POLYGON"}(n||(n={}));var u=o.a.memo((function(e){var t=e.input,a=e.type,r=(void 0===a&&n.POLYGON,e.onClick),u=Object(l.f)((function(e){t.face&&[t.face.a,t.face.b,t.face.c].forEach((function(a,n){var r=t.object.geometry.getAttribute("position");e.setXYZ(n,r.getX(a),r.getY(a),r.getZ(a))})),e.needsUpdate=!0}),[t.faceIndex]),s=Object(l.f)((function(e){e.computeBoundingSphere()}),[t.faceIndex]),m=Object(c.useMemo)((function(){return new Float32Array(9)}),[]);return o.a.createElement("mesh",{onPointerDown:r||null},o.a.createElement("bufferGeometry",{ref:s,attach:"geometry"},o.a.createElement("bufferAttribute",{ref:u,attachObject:["attributes","position"],count:3,array:m,itemSize:3})),o.a.createElement("meshBasicMaterial",{attach:"material",color:"red",transparent:!0,opacity:.4,side:i.DoubleSide}))}),(function(e,t){return e.input&&e.input.face&&e.input.faceIndex===t.input.faceIndex})),s=a(46),m=a(47),f=a(39),p=a(42);Object(l.b)({OrbitControls:s.a}),Object(l.b)({TransformControls:m.a});var b=[function(){var e=Object(c.useRef)(),t=Object(c.useState)({}),a=Object(r.a)(t,2),n=a[0],l=a[1];Object(c.useEffect)((function(){console.log("face index: %s",n?n.faceIndex:"")}),[n.faceIndex]);var i=Object(c.useCallback)((function(e,t){void 0===t||(t?console.log("Pointer Enters"):console.log("Pointer Leaves"));e.stopPropagation(),l(e)}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("mesh",{ref:e,position:[0,0,0],onPointerMove:function(e){return i(e)},onPointerOver:function(e){return i(e,!0)},onPointerOut:function(e){return i(e,!1)}},o.a.createElement("boxBufferGeometry",{attach:"geometry",args:[10,10,10]}),o.a.createElement("meshBasicMaterial",{attach:"material",color:"#000000",wireframe:!0})),o.a.createElement(u,{input:n}))},function(){var e=Object(c.useState)({index:null}),t=Object(r.a)(e,2),a=t[0],n=t[1],l=Object(c.useCallback)((function(e,t){n(e)}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(u,{input:a}),o.a.createElement("mesh",{position:[0,0,0],onPointerMove:function(e){return l(e,!0)}},o.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[15,6,6]}),o.a.createElement("meshBasicMaterial",{attach:"material",color:"#000000",wireframe:!0})))},function(){var e=Object(c.useState)({index:null}),t=Object(r.a)(e,2),a=t[0],n=t[1],l=Object(c.useCallback)((function(e,t){e.stopPropagation(),n(e)}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("mesh",{position:[0,0,0],onPointerMove:function(e){return l(e,!0)}},o.a.createElement("planeBufferGeometry",{attach:"geometry",args:[16,16,4,4]}),o.a.createElement("meshBasicMaterial",{attach:"material",color:"#000000",wireframe:!0})),o.a.createElement(u,{input:a}))}];t.default=function(e){var t=e.sample,a=Object(c.useState)(0),n=Object(r.a)(a,2),i=n[0],u=n[1];Object(c.useEffect)((function(){void 0!==t.case&&null!==t.case&&""!==t.case&&u(t.case)}),[]);var s=b[i];return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.b,{sample:t}),o.a.createElement(f.a,{items:b.map((function(e){return e.name})),current:i,onSelect:function(e){console.log("switch case to: "+e),u(parseInt(e))}}),o.a.createElement(l.a,{gl2:!0,camera:{position:[50,25,50]}},o.a.createElement(p.Controls,null),o.a.createElement(s,null)))}}}]);
//# sourceMappingURL=7.702dbc67.chunk.js.map